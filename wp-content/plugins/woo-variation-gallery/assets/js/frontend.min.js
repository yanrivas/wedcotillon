!function(i){var e={};function t(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return i[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=i,t.c=e,t.d=function(i,e,a){t.o(i,e)||Object.defineProperty(i,e,{configurable:!1,enumerable:!0,get:a})},t.n=function(i){var e=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(e,"a",e),e},t.o=function(i,e){return Object.prototype.hasOwnProperty.call(i,e)},t.p="",t(t.s=0)}([function(i,e,t){t(1),t(3),t(4),t(5),t(6),t(7),i.exports=t(8)},function(i,e,t){jQuery(function(i){Promise.resolve().then(function(){return t(2)}).then(function(){i(".woo-variation-gallery-wrapper:not(.woo-variation-gallery-product-type-variable)").WooVariationGallery(),i(document).on("wc_variation_form",".variations_form",function(){i(".woo-variation-gallery-wrapper").WooVariationGallery()}),i(document.body).on("post-load",function(){i(".woo-variation-gallery-wrapper").WooVariationGallery()}),i(document).on("qv_loader_stop",function(){i(".woo-variation-gallery-wrapper:not(.woo-variation-gallery-product-type-variable)").WooVariationGallery()})})})},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function i(i,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(e,t,a){return t&&i(e.prototype,t),a&&i(e,a),e}}();var o=function(i){var e={},t=function(){function t(a,o){!function(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._el=a,this._element=i(a),this._config=i.extend({},e,o),this.$product=this._element.closest(".product"),this.$variations_form=this.$product.find(".variations_form"),this.$target=this._element.parent(),this.$slider=i(".woo-variation-gallery-slider",this._element),this.$thumbnail=i(".woo-variation-gallery-thumbnail-slider",this._element),this.thumbnail_columns=this._element.data("thumbnail_columns"),this.product_id=this.$variations_form.data("product_id"),this.is_variation_product=this.$variations_form.length>0,this.initial_load=!0,this.defaultGallery(),woo_variation_gallery_options.enable_gallery_preload&&this.initVariationImagePreload(),this.initEvents(),this.initVariationGallery(),this.is_variation_product||this.imagesLoaded(),this.is_variation_product&&(this.initSlick(),this.initZoom(),this.initPhotoswipe()),this._element.data("woo_variation_gallery",this),i(document).trigger("woo_variation_gallery_init",[this])}return a(t,[{key:"init",value:function(){var i=this;return _.debounce(function(){i.initSlick(),i.initZoom(),i.initPhotoswipe()},500)}},{key:"dimension",value:function(){}},{key:"initEvents",value:function(){this._element.on("woo_variation_gallery_image_loaded",this.init())}},{key:"initSlick",value:function(){var e=this;this.$slider.hasClass("slick-initialized")&&this.$slider.slick("unslick"),this.$slider.off("init"),this.$slider.off("beforeChange"),this.$slider.off("afterChange"),this._element.trigger("woo_variation_gallery_before_init",[this]),this.$slider.on("init",function(i){e.initial_load&&(e.initial_load=!1,_.delay(function(){},2e3))}).on("beforeChange",function(i,t,a,o){e.$thumbnail.find(".wvg-gallery-thumbnail-image").not(".slick-slide").removeClass("current-thumbnail"),e.$thumbnail.find(".wvg-gallery-thumbnail-image").not(".slick-slide").eq(o).addClass("current-thumbnail")}).on("afterChange",function(i,t,a){e.stopVideo(e.$slider),e.initZoomForTarget(a)}).slick(),this.$thumbnail.find(".wvg-gallery-thumbnail-image").not(".slick-slide").first().addClass("current-thumbnail"),this.$thumbnail.find(".wvg-gallery-thumbnail-image").not(".slick-slide").each(function(t,a){i(a).find("div, img").on("click",function(i){i.preventDefault(),i.stopPropagation(),e.$slider.slick("slickGoTo",t)})}),_.delay(function(){e._element.trigger("woo_variation_gallery_slider_slick_init",[e])},1),_.delay(function(){e.removeLoadingClass()},100)}},{key:"initZoomForTarget",value:function(e){if(woo_variation_gallery_options.enable_gallery_zoom){var t=parseInt(this.$target.width()),a=!1,o=this.$slider.slick("getSlick").$slides.eq(e);if(i(o).each(function(e,o){var n=i(o).find("img");if(parseInt(n.data("large_image_width"))>t)return a=!0,!1}),i().zoom&&a){var n=i.extend({touch:!1},wc_single_product_params.zoom_options);"ontouchstart"in document.documentElement&&(n.on="click"),o.trigger("zoom.destroy"),o.zoom(n)}}}},{key:"initZoom",value:function(){var i=this.$slider.slick("slickCurrentSlide");this.initZoomForTarget(i)}},{key:"initPhotoswipe",value:function(){var i=this;woo_variation_gallery_options.enable_gallery_lightbox&&(this._element.off("click",".woo-variation-gallery-trigger"),this._element.off("click",".wvg-gallery-image a"),this._element.on("click",".woo-variation-gallery-trigger",function(e){i.openPhotoswipe(e)}),this._element.on("click",".wvg-gallery-image a",function(e){i.openPhotoswipe(e)}))}},{key:"openPhotoswipe",value:function(e){var t=this;if(e.preventDefault(),"undefined"==typeof PhotoSwipe)return!1;var a=i(".pswp")[0],o=this.getGalleryItems(),n=i.extend({index:this.$slider.slick("slickCurrentSlide")},wc_single_product_params.photoswipe_options),r=new PhotoSwipe(a,PhotoSwipeUI_Default,o,n);r.listen("close",function(){t.stopVideo(a)}),r.listen("afterChange",function(){t.stopVideo(a)}),r.init()}},{key:"stopVideo",value:function(e){i(e).find("iframe, video").each(function(){var e=i(this).prop("tagName").toLowerCase();if("iframe"===e)i(this).attr("src");"video"===e&&i(this)[0].pause()})}},{key:"addLoadingClass",value:function(){this._element.addClass("loading-gallery")}},{key:"removeLoadingClass",value:function(){this._element.removeClass("loading-gallery")}},{key:"getGalleryItems",value:function(){var e=this.$slider.slick("getSlick").$slides,t=[];return e.length>0&&e.each(function(e,a){var o=i(a).find("img, iframe, video"),n=void 0;switch(i(o).prop("tagName").toLowerCase()){case"img":n={src:o.attr("data-large_image"),w:o.attr("data-large_image_width"),h:o.attr("data-large_image_height"),title:o.attr("data-caption")?o.attr("data-caption"):o.attr("title")};break;case"iframe":n={html:'<iframe class="wvg-lightbox-iframe" src="'+o.attr("src")+'" style="width: 100%; height: 100%; margin: 0;padding: 0; background-color: #000000" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'};break;case"video":n={html:'<video preload="auto" class="wvg-lightbox-video" disablePictureInPicture controls controlsList="nodownload" src="'+o.attr("src")+'" style="width: 100%; height: 100%; margin: 0;padding: 0; background-color: #000000"></video>'}}t.push(n)}),t}},{key:"destroySlick",value:function(){this.$slider.html(""),this.$thumbnail.html(""),this.$slider.hasClass("slick-initialized")&&this.$slider.slick("unslick"),this._element.trigger("woo_variation_gallery_slick_destroy",[this])}},{key:"defaultGallery",value:function(){var i=this;this.is_variation_product&&wp.ajax.send("wvg_get_default_gallery",{data:{product_id:this.product_id},success:function(e){i._element.data("woo_variation_gallery_default",e),i._element.trigger("woo_variation_default_gallery_loaded",[i,e])},error:function(e){i._element.data("woo_variation_gallery_default",[]),i._element.trigger("woo_variation_default_gallery_loaded",[i,e])}})}},{key:"initVariationImagePreload",value:function(){var i=this;this.is_variation_product&&wp.ajax.send("wvg_get_available_variation_images",{data:{product_id:this.product_id},success:function(e){e.length>1&&i.imagePreload(e),i._element.data("woo_variation_gallery_variation_images",e),i._element.trigger("woo_variation_gallery_variation_images",[i,e])},error:function(e){i._element.data("woo_variation_gallery_variation_images",[])}})}},{key:"imagePreload",value:function(e){for(var t=0;t<e.length;t++)try{var a=new Image,o=new Image,n=new Image,r=new Image;a.src=e[t].src,e[t].srcset&&(a.srcset=e[t].srcset),o.src=e[t].gallery_thumbnail_src,n.src=e[t].full_src,r.src=e[t].archive_src;var l=i.trim(e[t].video_link);if(l&&"video"===e[t].video_embed_type){var s=new XMLHttpRequest;s.open("GET",l,!0),s.responseType="blob",s.onload=function(){if(200===this.status){var i=this.response;URL.createObjectURL(i)}},s.onerror=function(){},s.send()}}catch(i){}}},{key:"initVariationGallery",value:function(){var i=this;this.$variations_form.off("reset_image.wvg"),this.$variations_form.off("click.wvg"),this.$variations_form.off("show_variation.wvg"),woo_variation_gallery_options.gallery_reset_on_variation_change?this.$variations_form.on("reset_image.wvg",function(e){i.addLoadingClass(),i.galleryReset()}):this.$variations_form.on("click.wvg",".reset_variations",function(e){i.addLoadingClass(),i.galleryReset()}),this.$variations_form.on("show_variation.wvg",function(e,t){t&&(i.addLoadingClass(),i.galleryInit(t.variation_gallery_images))})}},{key:"galleryReset",value:function(){var i=this,e=this._element.data("woo_variation_gallery_default");e&&e.length>0?this.galleryInit(e):_.delay(function(){i.removeLoadingClass()},100)}},{key:"galleryInit",value:function(i){var e=this,t=i.length>1;this._element.trigger("before_woo_variation_gallery_init",[this,i]),this.destroySlick();var a=i.map(function(i){return wp.template("woo-variation-gallery-slider-template")(i)}).join(""),o=i.map(function(i){return wp.template("woo-variation-gallery-thumbnail-template")(i)}).join("");t?this.$target.addClass("woo-variation-gallery-has-product-thumbnail"):this.$target.removeClass("woo-variation-gallery-has-product-thumbnail"),this.$slider.html(a),t?this.$thumbnail.html(o):this.$thumbnail.html(""),_.delay(function(){e.imagesLoaded()},1)}},{key:"imagesLoaded",value:function(){var e=this;if(!i().imagesLoaded.done)return this._element.trigger("woo_variation_gallery_image_loading",[this]),void this._element.trigger("woo_variation_gallery_image_loaded",[this]);this._element.imagesLoaded().progress(function(i,t){e._element.trigger("woo_variation_gallery_image_loading",[e])}).done(function(i){e._element.trigger("woo_variation_gallery_image_loaded",[e])})}}],[{key:"_jQueryInterface",value:function(i){return this.each(function(){new t(this,i)})}}]),t}();return i.fn.WooVariationGallery=t._jQueryInterface,i.fn.WooVariationGallery.Constructor=t,i.fn.WooVariationGallery.noConflict=function(){return i.fn.WooVariationGallery=i.fn.WooVariationGallery,t._jQueryInterface},t}(jQuery);e.default=o},function(i,e){},function(i,e){},function(i,e){},function(i,e){},function(i,e){},function(i,e){}]);